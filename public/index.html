<html>
  <head>
    <meta charset="utf-8" />
    <title>Metastore</title>
    <meta name="description" content="Meta Store" />
    <!-- aframe -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-environment-component@1.3.1/dist/aframe-environment-component.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    
    <!-- networked -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.5.0/socket.io.slim.js"></script>
    <script src="./js/easyrtc.js"></script>
    <script src="/dist/networked-aframe.js"></script>

    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script src="./js/simple-navmesh.js"></script>
    <script src="./js/spawn-in-circle.component.js"></script>
  </head>
  <body>
    <a-scene networked-scene="
    room: basic-audio;
    adapter: easyrtc;
    audio: true;
    debug: true;"
    vr-mode-ui="enabled:true"
      renderer="alpha:true;physicallyCorrectLights:true;colorManagement:true;exposure:2;toneMapping:ACESFilmic;"
      background="color:#2b2b2b;"
      reflection="directionalLight:a-light#dirlight;"
      shadow="type: pcfsoft"
      gltf-model="dracoDecoderPath: https://cdn.jsdelivr.net/npm/three@0.129.0/examples/js/libs/draco/gltf/draco_decoder.js;"
      exposure="1"
    >
      <a-entity id="rig" movement-controls="speed: 0.090" onload-move-camera>
        <a-entity
          id="player"
          networked="template:#avatar-template;attachTemplateToLocal:false;"
          camera
          position="0 1.6 0"
          spawn-in-circle="radius:3"
          cursor="rayOrigin: mouse"
          simple-navmesh-constraint="navmesh:.navmesh;fall:0.5;height:1.6;"
          look-controls="pointerLockEnabled: false"
        >
          <a-sphere class="head" visible="false" random-color></a-sphere>
        </a-entity>
      </a-entity>

      <a-gltf-model class="navmesh" src="#navmesh-glb" visible="false" position="0 0 0"></a-gltf-model>
      <a-gltf-model
        src="#building-glb"
        id="building"
        exposure="1"
        no-tonemapping="Light"
        shadow="cast:true;"
        position="0 1 0"
        animation-mixer="clip: *;"
      ></a-gltf-model>
      <a-assets>
        <a-asset-item id="building-glb" src="./assets/base_building_meta_lite.glb"></a-asset-item>
        <a-asset-item id="navmesh-glb" src="./assets/navmesh_meta_lite.glb"></a-asset-item>

        <!-- Avatar -->
        <template id="avatar-template">
          <a-entity class="avatar">
            <a-sphere class="head" scale="0.45 0.5 0.4"></a-sphere>
            <a-entity class="face" position="0 0.05 0">
              <a-sphere class="eye" color="#efefef" position="0.16 0.1 -0.35" scale="0.12 0.12 0.12">
                <a-sphere class="pupil" color="#000" position="0 0 -1" scale="0.2 0.2 0.2"></a-sphere>
              </a-sphere>
              <a-sphere class="eye" color="#efefef" position="-0.16 0.1 -0.35" scale="0.12 0.12 0.12">
                <a-sphere class="pupil" color="#000" position="0 0 -1" scale="0.2 0.2 0.2"></a-sphere>
              </a-sphere>
            </a-entity>
          </a-entity>
        </template>

        <!-- product -->
        <!-- apparel -->
        <a-asset-item id="5-panel" src="./assets/product/5_panel_cap.glb"></a-asset-item>
        <a-asset-item id="6-panel" src="./assets/product/6_panel_cap.glb"></a-asset-item>
        <a-asset-item id="bagpack" src="./assets/product/bagpack.glb"></a-asset-item>
        <a-asset-item id="basic_tshirt" src="./assets/product/basic_tshirt.glb"></a-asset-item>
        <a-asset-item id="benie" src="./assets/product/benie.glb"></a-asset-item>

        <a-asset-item id="crewneck" src="./assets/product/crewneck.glb"></a-asset-item>
        <a-asset-item id="hi_shoes" src="./assets/product/hi_shoes.glb"></a-asset-item>
        <a-asset-item id="low_shoes" src="./assets/product/low_shoes.glb"></a-asset-item>
        <a-asset-item id="hoody" src="./assets/product/hoody.glb"></a-asset-item>
        <a-asset-item id="kimono_navy" src="./assets/product/kimono_navy.glb"></a-asset-item>
        <a-asset-item id="kimono_wabash" src="./assets/product/kimono_wabash.glb"></a-asset-item>
        <a-asset-item id="mini_bag" src="./assets/product/mini_bag.glb"></a-asset-item>
        <a-asset-item id="plaid_trucker" src="./assets/product/plaid_trucker_jacket.glb"></a-asset-item>
        <a-asset-item id="polo_cap" src="./assets/product/polo_cap.glb"></a-asset-item>
        <a-asset-item id="sandal" src="./assets/product/sandal.glb"></a-asset-item>
        <a-asset-item id="trucker_cap" src="./assets/product/trucker_cap.glb"></a-asset-item>
        <a-asset-item id="waistbag" src="./assets/product/waistbag.glb"></a-asset-item>
        <a-asset-item id="tshirt_bergambar" src="./assets/product/tshirt_bergambar.glb"></a-asset-item>

        <!-- cargo -->
        <a-asset-item id="cargo_black" src="./assets/product/cargo_black.glb"></a-asset-item>
        <a-asset-item id="cargo_green" src="./assets/product/cargo_green.glb"></a-asset-item>
        <a-asset-item id="cargo_grey" src="./assets/product/cargo_grey.glb"></a-asset-item>
        <a-asset-item id="cargo_khaki" src="./assets/product/cargo_khaki.glb"></a-asset-item>
        <a-asset-item id="two_tone_cargo_green" src="./assets/product/two_tone_cargo_green.glb"></a-asset-item>
        
        <!-- chino -->
        <a-asset-item id="chino_black" src="./assets/product/chino_black.glb"></a-asset-item>
        <a-asset-item id="chino_cream" src="./assets/product/chino_cream.glb"></a-asset-item>
        <a-asset-item id="chino_green" src="./assets/product/chino_green.glb"></a-asset-item>
        <a-asset-item id="chino_grey" src="./assets/product/chino_grey.glb"></a-asset-item>
        <a-asset-item id="chino_khaki" src="./assets/product/chino_khaki.glb"></a-asset-item>
        <a-asset-item id="chino_navy" src="./assets/product/chino_navy.glb"></a-asset-item>

        <!-- denim -->
        <a-asset-item id="crow_denim" src="./assets/product/crow_denim.glb"></a-asset-item>
        <a-asset-item id="inari_black" src="./assets/product/inari_black_denim.glb"></a-asset-item>
        <a-asset-item id="jack_o_denim" src="./assets/product/jack_o_denim.glb"></a-asset-item>
        <a-asset-item id="zeldris_denim" src="./assets/product/zeldris_denim.glb"></a-asset-item>

        <!-- saga of theolopolis -->
        <a-asset-item id="khomun_denim" src="./assets/product/khomun_denim.glb"></a-asset-item>
        <a-asset-item id="khomun_tshirt" src="./assets/product/khomun_tshirt.glb"></a-asset-item>
        <a-asset-item id="nephtys_denim" src="./assets/product/nephtys_denim.glb"></a-asset-item>
        <a-asset-item id="nephthys_tshirt" src="./assets/product/nephthys_tshirt.glb"></a-asset-item>
        <a-asset-item id="nubia_denim" src="./assets/product/nubia_denim.glb"></a-asset-item>
        <a-asset-item id="nubia_tshirt" src="./assets/product/nubia_tshirt.glb"></a-asset-item>
        <a-asset-item id="sidna_denim" src="./assets/product/sidna_denim.glb"></a-asset-item>
        <a-asset-item id="sidna_tshirt" src="./assets/product/sidna_tshirt.glb"></a-asset-item>
        <a-asset-item id="taj_denim" src="./assets/product/taj_denim.glb"></a-asset-item>
        <a-asset-item id="taj_tshirt" src="./assets/product/taj_tshirt.glb"></a-asset-item>

        <!-- underwold -->
        <a-asset-item id="apophis" src="./assets/product/underworld/apophis.glb"></a-asset-item>
        <a-asset-item id="eshe" src="./assets/product/underworld/eshe.glb"></a-asset-item>
        <a-asset-item id="heka" src="./assets/product/underworld/heka.glb"></a-asset-item>
        <a-asset-item id="seth" src="./assets/product/underworld/seth.glb"></a-asset-item>
        <a-asset-item id="sikhmus" src="./assets/product/underworld/sikhmus.glb"></a-asset-item>

      </a-assets>
      <a-light
        id="dirlight"
        intensity="1"
        light="intensity: 10; castShadow: true; color: #ffffff; shadowCameraFar: 5; shadowMapWidth: 550"
        position="-0.11473 1.34906 -0.52941"
        rotation=""
        visible=""
      ></a-light>
      <!-- apparel-->
      <a-gltf-model id="5-panel" src="#5-panel" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="6-panel" src="#6-panel" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="bagpack" src="#bagpack" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="basic_tshirt" src="#basic_tshirt" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="benie" src="#benie" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="crewneck" src="#crewneck" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="hi_shoes" src="#hi_shoes" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="low_shoes" src="#low_shoes" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="hoody" src="#hoody" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="kimono_navy" src="#kimono_navy" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="kimono_wabash" src="#kimono_wabash" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="mini_bag" src="#mini_bag" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="plaid_trucker" src="#plaid_trucker" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="polo_cap" src="#polo_cap" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="sandal" src="#sandal" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="trucker_cap" src="#trucker_cap" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="waistbag" src="#waistbag" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="tshirt_bergambar" src="#tshirt_bergambar" position="0 1 0"></a-gltf-model>    

      <!-- cargo -->
      <a-gltf-model id="cargo_black" src="#cargo_black" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="cargo_green" src="#cargo_green" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="cargo_grey" src="#cargo_grey" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="cargo_khaki" src="#cargo_khaki" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="two_tone_cargo_green" src="#two_tone_cargo_green" position="0 1 0"></a-gltf-model>

      <!-- chino -->
      <a-gltf-model id="chino_black" src="#chino_black" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="chino_cream" src="#chino_cream" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="chino_green" src="#chino_green" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="chino_grey" src="#chino_grey" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="chino_khaki" src="#chino_khaki" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="chino_navy" src="#chino_navy" position="0 1 0"></a-gltf-model>

      <!-- denim -->
      <a-gltf-model id="crow_denim" src="#crow_denim" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="inari_black" src="#inari_black" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="jack_o_denim" src="#jack_o_denim" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="zeldris_denim" src="#zeldris_denim" position="0 1 0"></a-gltf-model>

      <!-- saga of theolopolis -->
      <a-gltf-model id="khomun_denim" src="#khomun_denim" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="khomun_tshirt" src="#khomun_tshirt" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="nephtys_denim" src="#nephtys_denim" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="nephthys_tshirt" src="#nephthys_tshirt" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="nubia_denim" src="#nubia_denim" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="nubia_tshirt" src="#nubia_tshirt" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="sidna_denim" src="#sidna_denim" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="sidna_tshirt" src="#sidna_tshirt" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="taj_denim" src="#taj_denim" position="0 1 0"></a-gltf-model>

      <a-gltf-model id="taj_tshirt" src="#taj_tshirt" position="0 1 0"></a-gltf-model>

      <!-- underworld -->
      <a-gltf-model id="apophis" src="#apophis" position="0 1 0"></a-gltf-model>
      <a-gltf-model id="eshe" src="#eshe" position="0 1 0"></a-gltf-model>
      <a-gltf-model id="heka" src="#heka" position="0 1 0"></a-gltf-model>
      <a-gltf-model id="seth" src="#seth" position="0 1 0"></a-gltf-model>
      <a-gltf-model id="sikhmus" src="#sikhmus" position="0 1 0"></a-gltf-model>

    </a-scene>

    <script>
      // Define custom schema for syncing avatar color, set by random-color
      // NAF.schemas.add({
      //   template: '#avatar-template',
      //   components: [
      //     'position',
      //     'rotation',
      //     {
      //       selector: '.head',
      //       component: 'material',
      //       property: 'color'
      //     }
      //   ]
      // });

      // Called by Networked-Aframe when connected to server
      function onConnect() {
        console.log('onConnect', new Date());
      }
    </script>
  </body>
</html>
